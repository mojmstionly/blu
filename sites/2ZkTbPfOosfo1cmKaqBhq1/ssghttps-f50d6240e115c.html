function t(){return t=Object.assign?Object.assign.bind():function(r){for(var h=1;h<arguments.length;h++){var a=arguments[h];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(r[c]=a[c])}return r},t.apply(this,arguments)}function e(r,h,a){return Math.max(r,Math.min(h,a))}class i{advance(r){var h;if(!this.isRunning)return;let a=!1;if(this.lerp)this.value=(c=this.value,u=this.to,(1-(p=1-Math.exp(-60*this.lerp*r)))*c+p*u),Math.round(this.value)===this.to&&(this.value=this.to,a=!0);else{this.currentTime+=r;const h=e(0,this.currentTime/this.duration,1);a=h>=1;const c=a?1:this.easing(h);this.value=this.from+(this.to-this.from)*c}var c,u,p;null==(h=this.onUpdate)||h.call(this,this.value,a),a&&this.stop()}stop(){this.isRunning=!1}fromTo(r,h,{lerp:a=.1,duration:c=1,easing:u=(r=>r),onStart:p,onUpdate:d}){this.from=this.value=r,this.to=h,this.lerp=a,this.duration=c,this.easing=u,this.currentTime=0,this.isRunning=!0,null==p||p(),this.onUpdate=d}}class s{constructor({wrapper:r,content:h,autoResize:a=!0}={}){if(this.resize=()=>{this.onWrapperResize(),this.onContentResize()},this.onWrapperResize=()=>{this.wrapper===window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)},this.onContentResize=()=>{this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth},this.wrapper=r,this.content=h,a){const r=function(r,h){let a;return function(){let h=arguments,c=this;clearTimeout(a),a=setTimeout((function(){r.apply(c,h)}),250)}}(this.resize);this.wrapper!==window&&(this.wrapperResizeObserver=new ResizeObserver(r),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(r),this.contentResizeObserver.observe(this.content)}this.resize()}destroy(){var r,h;null==(r=this.wrapperResizeObserver)||r.disconnect(),null==(h=this.contentResizeObserver)||h.disconnect()}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}}class o{constructor(){this.events={}}emit(r,...h){let a=this.events[r]||[];for(let r=0,c=a.length;r<c;r++)a[r](...h)}on(r,h){var a;return(null==(a=this.events[r])?void 0:a.push(h))||(this.events[r]=[h]),()=>{var a;this.events[r]=null==(a=this.events[r])?void 0:a.filter((r=>h!==r))}}off(r,h){var a;this.events[r]=null==(a=this.events[r])?void 0:a.filter((r=>h!==r))}destroy(){this.events={}}}class n{constructor(r,{wheelMultiplier:h=1,touchMultiplier:a=2,normalizeWheel:c=!1}){this.onTouchStart=r=>{const{clientX:h,clientY:a}=r.targetTouches?r.targetTouches[0]:r;this.touchStart.x=h,this.touchStart.y=a,this.lastDelta={x:0,y:0}},this.onTouchMove=r=>{const{clientX:h,clientY:a}=r.targetTouches?r.targetTouches[0]:r,c=-(h-this.touchStart.x)*this.touchMultiplier,u=-(a-this.touchStart.y)*this.touchMultiplier;this.touchStart.x=h,this.touchStart.y=a,this.lastDelta={x:c,y:u},this.emitter.emit("scroll",{deltaX:c,deltaY:u,event:r})},this.onTouchEnd=r=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:r})},this.onWheel=r=>{let{deltaX:h,deltaY:a}=r;this.normalizeWheel&&(h=e(-100,h,100),a=e(-100,a,100)),h*=this.wheelMultiplier,a*=this.wheelMultiplier,this.emitter.emit("scroll",{deltaX:h,deltaY:a,event:r})},this.element=r,this.wheelMultiplier=h,this.touchMultiplier=a,this.normalizeWheel=c,this.touchStart={x:null,y:null},this.emitter=new o,this.element.addEventListener("wheel",this.onWheel,{passive:!1}),this.element.addEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.addEventListener("touchend",this.onTouchEnd,{passive:!1})}on(r,h){return this.emitter.on(r,h)}destroy(){this.emitter.destroy(),this.element.removeEventListener("wheel",this.onWheel,{passive:!1}),this.element.removeEventListener("touchstart",this.onTouchStart,{passive:!1}),this.element.removeEventListener("touchmove",this.onTouchMove,{passive:!1}),this.element.removeEventListener("touchend",this.onTouchEnd,{passive:!1})}}class l{constructor({wrapper:r=window,content:h=document.documentElement,wheelEventsTarget:a=r,eventsTarget:c=a,smoothWheel:u=!0,smoothTouch:p=!1,syncTouch:d=!1,syncTouchLerp:m=.1,__iosNoInertiaSyncTouchLerp:v=.4,touchInertiaMultiplier:g=35,duration:S,easing:w=(r=>Math.min(1,1.001-Math.pow(2,-10*r))),lerp:f=!S&&.1,infinite:y=!1,orientation:T="vertical",gestureOrientation:z="vertical",touchMultiplier:_=1,wheelMultiplier:M=1,normalizeWheel:L=!1,autoResize:b=!0}={}){this.onVirtualScroll=({deltaX:r,deltaY:h,event:a})=>{if(a.ctrlKey)return;const c=a.type.includes("touch"),u=a.type.includes("wheel");if("both"===this.options.gestureOrientation&&0===r&&0===h||"vertical"===this.options.gestureOrientation&&0===h||"horizontal"===this.options.gestureOrientation&&0===r||c&&"vertical"===this.options.gestureOrientation&&0===this.scroll&&!this.options.infinite&&h<=0)return;let p=a.composedPath();if(p=p.slice(0,p.indexOf(this.rootElement)),p.find((r=>{var h;return(null==r.hasAttribute?void 0:r.hasAttribute("data-lenis-prevent"))||c&&(null==r.hasAttribute?void 0:r.hasAttribute("data-lenis-prevent-touch"))||u&&(null==r.hasAttribute?void 0:r.hasAttribute("data-lenis-prevent-wheel"))||(null==(h=r.classList)?void 0:h.contains("lenis"))})))return;if(this.isStopped||this.isLocked)return void a.preventDefault();if(this.isSmooth=(this.options.smoothTouch||this.options.syncTouch)&&c||this.options.smoothWheel&&u,!this.isSmooth)return this.isScrolling=!1,void this.animate.stop();a.preventDefault();let d=h;"both"===this.options.gestureOrientation?d=Math.abs(h)>Math.abs(r)?h:r:"horizontal"===this.options.gestureOrientation&&(d=r);const m=c&&this.options.syncTouch,v=c&&"touchend"===a.type&&Math.abs(d)>1;v&&(d=this.velocity*this.options.touchInertiaMultiplier),this.scrollTo(this.targetScroll+d,t({programmatic:!1},m&&{lerp:v?this.syncTouchLerp:this.options.__iosNoInertiaSyncTouchLerp}))},this.onNativeScroll=()=>{if(!this.__preventNextScrollEvent&&!this.isScrolling){const r=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.direction=Math.sign(this.animatedScroll-r),this.emit()}},window.lenisVersion="1.0.29",r!==document.documentElement&&r!==document.body||(r=window),this.options={wrapper:r,content:h,wheelEventsTarget:a,eventsTarget:c,smoothWheel:u,smoothTouch:p,syncTouch:d,syncTouchLerp:m,__iosNoInertiaSyncTouchLerp:v,touchInertiaMultiplier:g,duration:S,easing:w,lerp:f,infinite:y,gestureOrientation:z,orientation:T,touchMultiplier:_,wheelMultiplier:M,normalizeWheel:L,autoResize:b},this.animate=new i,this.emitter=new o,this.dimensions=new s({wrapper:r,content:h,autoResize:b}),this.toggleClass("lenis",!0),this.velocity=0,this.isLocked=!1,this.isStopped=!1,this.isSmooth=d||u||p,this.isScrolling=!1,this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,{passive:!1}),this.virtualScroll=new n(c,{touchMultiplier:_,wheelMultiplier:M,normalizeWheel:L}),this.virtualScroll.on("scroll",this.onVirtualScroll)}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,{passive:!1}),this.virtualScroll.destroy(),this.dimensions.destroy(),this.toggleClass("lenis",!1),this.toggleClass("lenis-smooth",!1),this.toggleClass("lenis-scrolling",!1),this.toggleClass("lenis-stopped",!1),this.toggleClass("lenis-locked",!1)}on(r,h){return this.emitter.on(r,h)}off(r,h){return this.emitter.off(r,h)}setScroll(r){this.isHorizontal?this.rootElement.scrollLeft=r:this.rootElement.scrollTop=r}resize(){this.dimensions.resize()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.velocity=0,this.animate.stop()}start(){this.isStopped=!1,this.reset()}stop(){this.isStopped=!0,this.animate.stop(),this.reset()}raf(r){const h=r-(this.time||r);this.time=r,this.animate.advance(.001*h)}scrollTo(r,{offset:h=0,immediate:a=!1,lock:c=!1,duration:u=this.options.duration,easing:p=this.options.easing,lerp:d=!u&&this.options.lerp,onComplete:m=null,force:v=!1,programmatic:g=!0}={}){if(!this.isStopped&&!this.isLocked||v){if(["top","left","start"].includes(r))r=0;else if(["bottom","right","end"].includes(r))r=this.limit;else{var S;let a;if("string"==typeof r?a=document.querySelector(r):null!=(S=r)&&S.nodeType&&(a=r),a){if(this.options.wrapper!==window){const r=this.options.wrapper.getBoundingClientRect();h-=this.isHorizontal?r.left:r.top}const c=a.getBoundingClientRect();r=(this.isHorizontal?c.left:c.top)+this.animatedScroll}}if("number"==typeof r){if(r+=h,r=Math.round(r),this.options.infinite?g&&(this.targetScroll=this.animatedScroll=this.scroll):r=e(0,r,this.limit),a)return this.animatedScroll=this.targetScroll=r,this.setScroll(this.scroll),this.reset(),void(null==m||m(this));if(!g){if(r===this.targetScroll)return;this.targetScroll=r}this.animate.fromTo(this.animatedScroll,r,{duration:u,easing:p,lerp:d,onStart:()=>{c&&(this.isLocked=!0),this.isScrolling=!0},onUpdate:(r,h)=>{this.isScrolling=!0,this.velocity=r-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=r,this.setScroll(this.scroll),g&&(this.targetScroll=r),h||this.emit(),h&&(this.reset(),this.emit(),null==m||m(this),this.__preventNextScrollEvent=!0,requestAnimationFrame((()=>{delete this.__preventNextScrollEvent})))}})}}}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return"horizontal"===this.options.orientation}get actualScroll(){return this.isHorizontal?this.rootElement.scrollLeft:this.rootElement.scrollTop}get scroll(){return this.options.infinite?(this.animatedScroll%(r=this.limit)+r)%r:this.animatedScroll;var r}get progress(){return 0===this.limit?1:this.scroll/this.limit}get isSmooth(){return this.__isSmooth}set isSmooth(r){this.__isSmooth!==r&&(this.__isSmooth=r,this.toggleClass("lenis-smooth",r))}get isScrolling(){return this.__isScrolling}set isScrolling(r){this.__isScrolling!==r&&(this.__isScrolling=r,this.toggleClass("lenis-scrolling",r))}get isStopped(){return this.__isStopped}set isStopped(r){this.__isStopped!==r&&(this.__isStopped=r,this.toggleClass("lenis-stopped",r))}get isLocked(){return this.__isLocked}set isLocked(r){this.__isLocked!==r&&(this.__isLocked=r,this.toggleClass("lenis-locked",r))}get className(){let r="lenis";return this.isStopped&&(r+=" lenis-stopped"),this.isLocked&&(r+=" lenis-locked"),this.isScrolling&&(r+=" lenis-scrolling"),this.isSmooth&&(r+=" lenis-smooth"),r}toggleClass(r,h){this.rootElement.classList.toggle(r,h),this.emitter.emit("className change",this)}}export{l as default};
//# sourceMappingURL=lenis.modern.mjs.map
